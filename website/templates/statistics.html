{% extends "base.html" %}

{% block content %}
    <style>
    table
    {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 100%;
    }

    td, th
    {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }

    tr:nth-child(even)
    {
        background-color: #dddddd;
    }
    </style>

    <body>
        <h2>Statistics</h2>

        <a href="javascript:toggleVisibility('myStatsTable');">My stats</a> / <a href="javascript:toggleVisibility('bestPlayersTable');">Best players</a> / <a href="javascript:toggleVisibility('findPlayerForm');">Find player</a>

        <form action="" style="display: none" method="POST" id="findPlayerForm">
            {% csrf_token %}
            {{ form }}
            <input type="submit" value="Submit">
        </form>

        <table style="display: block" id="myStatsTable">
            <tr>
                <th>Nickname</th>
                <th>Games Won</th>
                <th>Winning percentage</th>
                <th>Average points</th>
                <th>Team contribution</th>
            </tr>
            {% for row in stats %}
            <tr>
                {% for item in row %}
                    <td> {{ item }}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </table>

        <table style="display: none" id="bestPlayersTable">
            <tr>
                <th>Nickname</th>
                <th>Games Won</th>
                <th>Winning percentage</th>
                <th>Average points</th>
                <th>Team contribution</th>
            </tr>
            {% for row in stats %}
                <tr>
                {% for item in row %}
                    <td> {{ item }}</td>
                {% endfor %}
                </tr>
            {% endfor %}
        </table>
    </body>

    <script>
        function toggleVisibility(id)
        {
            const element = document.getElementById(id);
            const oppositeElements = ["myStatsTable", "bestPlayersTable", "findPlayerForm"];
            const index = oppositeElements.indexOf(id)

            if (index > -1)
            {
                oppositeElements.splice(index, 1)
            }

            if (element.style.display === "none")
            {
                for(const oppElem in oppositeElements)
                {
                    const elem = document.getElementById(oppositeElements[oppElem])
                    if (elem.style.display !== "none")
                    {
                        elem.style.display = "none"
                    }
                }
                element.style.display = "block";
            }
            else
            {
                element.style.display = "none";
            }
        }
    </script>
{% endblock %}